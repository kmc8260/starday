# streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
import streamlit as st
# ë‚ ì§œ ë° ì‹œê°„ ê´€ë ¨ ìž‘ì—…ì„ ìœ„í•œ datetime ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
import datetime
# ê°„ë‹¨í•œ ìš´ì„¸ ë‚´ìš©ì„ ë¯¸ë¦¬ ì¤€ë¹„í•´ë‘¡ë‹ˆë‹¤.
import random

# ë³„ìžë¦¬ë³„ ìš´ì„¸ ë‚´ìš©ì„ ì €ìž¥í•˜ëŠ” ë”•ì…”ë„ˆë¦¬
FORTUNES = {
    "ë¬¼ë³‘ìžë¦¬": [
        "ìƒˆë¡œìš´ ì•„ì´ë””ì–´ê°€ ìƒ˜ì†ŸëŠ” í•˜ë£¨ìž…ë‹ˆë‹¤. ì°½ì˜ë ¥ì„ ë§ˆìŒê» ë°œíœ˜í•´ë³´ì„¸ìš”.",
        "ì£¼ë³€ ì‚¬ëžŒë“¤ê³¼ì˜ ì†Œí†µì´ ì¤‘ìš”í•œ ë‚ ìž…ë‹ˆë‹¤. ê¸ì •ì ì¸ ëŒ€í™”ê°€ í–‰ìš´ì„ ê°€ì ¸ë‹¤ì¤„ ê±°ì˜ˆìš”.",
        "ì˜¤ëŠ˜ì€ ìž ì‹œ ì‰¬ì–´ê°€ë©° ìž¬ì¶©ì „ì˜ ì‹œê°„ì„ ê°–ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤."
    ],
    "ë¬¼ê³ ê¸°ìžë¦¬": [
        "ê°ì„±ì´ í’ë¶€í•´ì§€ëŠ” ë‚ ìž…ë‹ˆë‹¤. ì˜ˆìˆ ì ì¸ í™œë™ìœ¼ë¡œ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í’€ì–´ë³´ì„¸ìš”.",
        "ì˜ˆìƒì¹˜ ëª»í•œ ì¢‹ì€ ì†Œì‹ì´ ë“¤ë ¤ì˜¬ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”.",
        "ë‹¤ë¥¸ ì‚¬ëžŒì˜ ë§ì„ ê²½ì²­í•˜ë©´, ë¬¸ì œ í•´ê²°ì˜ ì‹¤ë§ˆë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ìžˆì„ ê±°ì˜ˆìš”."
    ],
    "ì–‘ìžë¦¬": [
        "ì—ë„ˆì§€ê°€ ë„˜ì¹˜ëŠ” í•˜ë£¨! ìƒˆë¡œìš´ ë„ì „ì„ í•˜ê¸°ì— ì™„ë²½í•œ ë‚ ìž…ë‹ˆë‹¤.",
        "ê²°ë‹¨ë ¥ì´ ë¹›ì„ ë°œí•˜ëŠ” ë‚ ìž…ë‹ˆë‹¤. ë§ì„¤ì´ì§€ ë§ê³  ëª©í‘œë¥¼ í–¥í•´ ë‚˜ì•„ê°€ì„¸ìš”.",
        "ìš´ë™ì´ë‚˜ ê°€ë²¼ìš´ ì‚°ì±…ìœ¼ë¡œ í™œê¸°ë¥¼ ë”í•´ë³´ì„¸ìš”."
    ],
    "í™©ì†Œìžë¦¬": [
        "ì°¨ë¶„í•˜ê³  ì•ˆì •ì ì¸ í•˜ë£¨ê°€ ì˜ˆìƒë©ë‹ˆë‹¤. ê¾¸ì¤€í•¨ì´ ì¢‹ì€ ê²°ê³¼ë¡œ ì´ì–´ì§ˆ ê±°ì˜ˆìš”.",
        "ê¸ˆì „ìš´ì´ ì¢‹ì€ ë‚ ìž…ë‹ˆë‹¤. ì‹ ì¤‘í•˜ê²Œ ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”.",
        "ë§›ìžˆëŠ” ìŒì‹ì„ ë¨¹ìœ¼ë©° ì†Œì†Œí•œ í–‰ë³µì„ ì¦ê²¨ë³´ì„¸ìš”."
    ],
    "ìŒë‘¥ì´ìžë¦¬": [
        "í˜¸ê¸°ì‹¬ì´ ì™•ì„±í•´ì§€ëŠ” ë‚ ìž…ë‹ˆë‹¤. ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš°ê¸°ì— ì¢‹ì€ ì‹œê¸°ì˜ˆìš”.",
        "ë‹¤ì–‘í•œ ì‚¬ëžŒë“¤ê³¼ì˜ ë§Œë‚¨ ì†ì—ì„œ ì¦ê±°ì›€ì„ ì°¾ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.",
        "ìž¬ì¹˜ ìžˆëŠ” ë§ì†œì”¨ë¡œ ì£¼ë³€ì„ ì¦ê²ê²Œ ë§Œë“¤ì–´ë³´ì„¸ìš”."
    ],
    "ê²Œìžë¦¬": [
        "ê°€ì¡±ì´ë‚˜ ê°€ê¹Œìš´ ì¹œêµ¬ë“¤ê³¼ ë”°ëœ»í•œ ì‹œê°„ì„ ë³´ë‚´ê¸° ì¢‹ì€ ë‚ ìž…ë‹ˆë‹¤.",
        "ë§ˆìŒì˜ ì†Œë¦¬ì— ê·€ë¥¼ ê¸°ìš¸ì—¬ ë³´ì„¸ìš”. ì§„ì •ìœ¼ë¡œ ì›í•˜ëŠ” ê²ƒì„ ì•Œê²Œ ë  ê±°ì˜ˆìš”.",
        "ì§‘ ì•ˆì„ ì •ë¦¬ì •ëˆí•˜ë©° ê¸°ë¶„ ì „í™˜ì„ í•´ë³´ëŠ” ê±´ ì–´ë–¨ê¹Œìš”?"
    ],
    "ì‚¬ìžìžë¦¬": [
        "ìžì‹ ê°ì´ ë„˜ì¹˜ëŠ” í•˜ë£¨ìž…ë‹ˆë‹¤. ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ì—¬ ì£¼ë³€ì„ ì´ëŒì–´ë³´ì„¸ìš”.",
        "ë‹¹ì‹ ì˜ ìž¬ëŠ¥ê³¼ ë§¤ë ¥ì´ ë¹›ì„ ë°œí•˜ëŠ” ë‚ ìž…ë‹ˆë‹¤.",
        "ìž‘ì€ ì„±ê³µì— ìŠ¤ìŠ¤ë¡œë¥¼ ì¹­ì°¬í•˜ë©° ìžì‹ ê°ì„ ë”ìš± í‚¤ì›Œë³´ì„¸ìš”."
    ],
    "ì²˜ë…€ìžë¦¬": [
        "ê¼¼ê¼¼í•¨ê³¼ ë¶„ì„ë ¥ì´ ë‹ë³´ì´ëŠ” ë‚ ìž…ë‹ˆë‹¤. ê³„íší•œ ì¼ì„ ì°¨ê·¼ì°¨ê·¼ í•´ê²°í•´ë‚˜ê°€ì„¸ìš”.",
        "ì‚¬ì†Œí•œ ë¶€ë¶„ê¹Œì§€ ì‹ ê²½ ì“°ë©´ ë” ì™„ë²½í•œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.",
        "ê±´ê°• ê´€ë¦¬ì— ì‹ ê²½ ì“°ë©´ ì¢‹ì€ í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš”."
    ],
    "ì²œì¹­ìžë¦¬": [
        "ê· í˜• ê°ê°ì´ ì¤‘ìš”í•œ ë‚ ìž…ë‹ˆë‹¤. ì¼ê³¼ íœ´ì‹ì˜ ì¡°í™”ë¥¼ ìž˜ ë§žì¶°ë³´ì„¸ìš”.",
        "ì£¼ë³€ ì‚¬ëžŒë“¤ê³¼ì˜ ê´€ê³„ê°€ ë”ìš± ëˆë…í•´ì§€ëŠ” ê³„ê¸°ê°€ ìƒê¸¸ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.",
        "ì•„ë¦„ë‹¤ìš´ ê²ƒì„ ë³´ë©° ë¯¸ì  ê°ê°ì„ ì¶©ì „í•´ë³´ì„¸ìš”."
    ],
    "ì „ê°ˆìžë¦¬": [
        "ì§‘ì¤‘ë ¥ì´ ë†’ì•„ì§€ëŠ” ë‚ ìž…ë‹ˆë‹¤. ì¤‘ìš”í•œ ì¼ì— ëª°ë‘í•˜ë©´ ì¢‹ì€ ì„±ê³¼ë¥¼ ë‚¼ ìˆ˜ ìžˆì–´ìš”.",
        "ë§ˆìŒì† ê¹Šì€ ê³³ì„ ë“¤ì—¬ë‹¤ë³´ë©° ìžì‹ ì„ ì„±ì°°í•˜ëŠ” ì‹œê°„ì„ ê°€ì ¸ë³´ì„¸ìš”.",
        "ì‹ ë¹„ë¡œìš´ ë§¤ë ¥ìœ¼ë¡œ ì£¼ë³€ ì‚¬ëžŒë“¤ì˜ ì‹œì„ ì„ ì‚¬ë¡œìž¡ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤."
    ],
    "ì‚¬ìˆ˜ìžë¦¬": [
        "ëª¨í—˜ì‹¬ê³¼ ë„ì „ ì •ì‹ ì´ ì†Ÿì•„ë‚˜ëŠ” ë‚ ìž…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì„¸ê³„ë¥¼ í–¥í•´ ë‚˜ì•„ê°€ ë³´ì„¸ìš”.",
        "ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ê°€ë“í•˜ì—¬ ì£¼ë³€ ì‚¬ëžŒë“¤ì—ê²Œë„ ì¢‹ì€ ì˜í–¥ì„ ì¤ë‹ˆë‹¤.",
        "ì—¬í–‰ ê³„íšì„ ì„¸ìš°ê±°ë‚˜ ìƒˆë¡œìš´ ì·¨ë¯¸ë¥¼ ì‹œìž‘í•˜ê¸°ì— ì¢‹ì€ ë‚ ìž…ë‹ˆë‹¤."
    ],
    "ì—¼ì†Œìžë¦¬": [
        "ì„±ì‹¤í•¨ê³¼ ì±…ìž„ê°ì´ ë¹›ì„ ë°œí•˜ëŠ” í•˜ë£¨ìž…ë‹ˆë‹¤. ë§¡ì€ ë°”ë¥¼ ì™„ë²½í•˜ê²Œ í•´ë‚¼ ìˆ˜ ìžˆì–´ìš”.",
        "ëª©í‘œë¥¼ í–¥í•œ ê¾¸ì¤€í•œ ë…¸ë ¥ì´ ê²°ì‹¤ì„ ë§ºê¸° ì‹œìž‘í•©ë‹ˆë‹¤.",
        "ìž¥ê¸°ì ì¸ ê³„íšì„ ì„¸ìš°ê³  ë¯¸ëž˜ë¥¼ ì¤€ë¹„í•˜ê¸°ì— ì¢‹ì€ ì‹œê¸°ìž…ë‹ˆë‹¤."
    ]
}


# ìƒë…„ì›”ì¼ì„ ê¸°ë°˜ìœ¼ë¡œ ë³„ìžë¦¬ë¥¼ ì°¾ì•„ì£¼ëŠ” í•¨ìˆ˜
def get_zodiac_sign(month, day):
    """
    ì›”(month)ê³¼ ì¼(day)ì„ ìž…ë ¥ë°›ì•„ í•´ë‹¹í•˜ëŠ” ë³„ìžë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    """
    if (month == 1 and day >= 20) or (month == 2 and day <= 18):
        return "ë¬¼ë³‘ìžë¦¬"
    elif (month == 2 and day >= 19) or (month == 3 and day <= 20):
        return "ë¬¼ê³ ê¸°ìžë¦¬"
    elif (month == 3 and day >= 21) or (month == 4 and day <= 19):
        return "ì–‘ìžë¦¬"
    elif (month == 4 and day >= 20) or (month == 5 and day <= 20):
        return "í™©ì†Œìžë¦¬"
    elif (month == 5 and day >= 21) or (month == 6 and day <= 21):
        return "ìŒë‘¥ì´ìžë¦¬"
    elif (month == 6 and day >= 22) or (month == 7 and day <= 22):
        return "ê²Œìžë¦¬"
    elif (month == 7 and day >= 23) or (month == 8 and day <= 22):
        return "ì‚¬ìžìžë¦¬"
    elif (month == 8 and day >= 23) or (month == 9 and day <= 23):
        return "ì²˜ë…€ìžë¦¬"
    elif (month == 9 and day >= 24) or (month == 10 and day <= 22):
        return "ì²œì¹­ìžë¦¬"
    elif (month == 10 and day >= 23) or (month == 11 and day <= 22):
        return "ì „ê°ˆìžë¦¬"
    elif (month == 11 and day >= 23) or (month == 12 and day <= 21):
        return "ì‚¬ìˆ˜ìžë¦¬"
    else:
        return "ì—¼ì†Œìžë¦¬"

# --- Streamlit ì•±ì˜ ë©”ì¸ ì½”ë“œ ---

# ì•±ì˜ ì œëª©ì„ ì„¤ì •í•©ë‹ˆë‹¤.
st.title("ðŸŒŸ ë³„ìžë¦¬ë¡œ ì•Œì•„ë³´ëŠ” ì˜¤ëŠ˜ì˜ ìš´ì„¸")

# ì„¸ì…˜ ìƒíƒœ(Session State) ì´ˆê¸°í™”
# 'result'ë¼ëŠ” í‚¤ê°€ ì„¸ì…˜ ìƒíƒœì— ì—†ìœ¼ë©´, ë¹ˆ ë¬¸ìžì—´ë¡œ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
# ì´ë ‡ê²Œ í•˜ë©´ ì‚¬ìš©ìžê°€ ë²„íŠ¼ì„ ëˆ„ë¥´ê¸° ì „ê¹Œì§€ëŠ” ê²°ê³¼ê°€ ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.
if 'result' not in st.session_state:
    st.session_state.result = ""

# ì‚¬ìš©ìžë¡œë¶€í„° ìƒë…„ì›”ì¼ì„ ìž…ë ¥ë°›ìŠµë‹ˆë‹¤.
# date_input ìœ„ì ¯ì„ ì‚¬ìš©í•˜ë©°, ê¸°ë³¸ê°’ì€ ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
birth_date = st.date_input(
    "ðŸŽ‚ ë‹¹ì‹ ì˜ ìƒë…„ì›”ì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.",
    datetime.date.today(),
    min_value=datetime.date(1950, 1, 1),
    max_value=datetime.date.today()
)

# 'ìš´ì„¸ ë³´ê¸°' ë²„íŠ¼ì„ ë§Œë“­ë‹ˆë‹¤.
# ì´ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ if ë¬¸ ì•ˆì˜ ì½”ë“œê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.
if st.button("ðŸ”® ìš´ì„¸ ë³´ê¸°"):
    # ìž…ë ¥ë°›ì€ ë‚ ì§œì—ì„œ ì›”ê³¼ ì¼ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
    month = birth_date.month
    day = birth_date.day

    # ë³„ìžë¦¬ ê³„ì‚° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
    zodiac_sign = get_zodiac_sign(month, day)
    
    # í•´ë‹¹ ë³„ìžë¦¬ì— ë§žëŠ” ìš´ì„¸ ëª©ë¡ì—ì„œ ë¬´ìž‘ìœ„ë¡œ í•˜ë‚˜ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
    fortune = random.choice(FORTUNES[zodiac_sign])

    # ê²°ê³¼ë¥¼ f-stringì„ ì‚¬ìš©í•˜ì—¬ ë³´ê¸° ì¢‹ì€ ë¬¸ìž¥ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤.
    result_text = f"ë‹¹ì‹ ì˜ ë³„ìžë¦¬ëŠ” **{zodiac_sign}**ì´êµ°ìš”!\n\nì˜¤ëŠ˜ì˜ ìš´ì„¸ëŠ”... \n\n**âœ¨ {fortune}**"
    
    # ìƒì„±ëœ ê²°ê³¼ ë¬¸ìž¥ì„ ì„¸ì…˜ ìƒíƒœì— ì €ìž¥í•©ë‹ˆë‹¤.
    st.session_state.result = result_text

# ì„¸ì…˜ ìƒíƒœì— ê²°ê³¼ê°€ ì €ìž¥ë˜ì–´ ìžˆë‹¤ë©´, í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.
if st.session_state.result:
    st.markdown("---") # êµ¬ë¶„ì„  ì¶”ê°€
    st.success(st.session_state.result) # success ë°•ìŠ¤ë¡œ ê²°ê³¼ë¥¼ ë³´ê¸° ì¢‹ê²Œ í‘œì‹œ